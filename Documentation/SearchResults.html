<!DOCTYPE html>

<!-- This is the page that shows up after you perform a search -->

<html>
    <head>
        <title>UE4 RTS Search Results</title> 
    </head>
            
    <body>
        <h1>Search Results</h1>
        <ul id="searchResultsList">
            
        </ul>
    </body>
</html>

<script>
    
    /* Probably don't want this function to be called on refresh. Is that the case? */
    window.onload = function() 
    {
        var whatUserSearchedFor = window.localStorage.getItem("searchText");
        onWindowLoad(whatUserSearchedFor);
    }
    
    /* @param searchText - what the user searched for */
    function onWindowLoad(searchText)
    {
        processSearchRequest(searchText);
    }
    
    function processSearchRequest(searchText)
    {
        var linksToShow = getSearchResults(searchText);
        
        // might need to delete previous elements first?
        
        for (var i = 0; i < linksToShow.length; ++i)
        {
            createSearchResultHTMLElement(linksToShow[i]);
        }
    }
    
    /* @param filename - the path of the file relative to the folder that stores all my auto-generated files in */
    function createSearchResultHTMLElement(filePath)
    {
        /* Prune filePath e.g. "Classes/ABuilding.html" becomes "ABuilding" */
        var niceName = filePath;
        for (var i = niceName.length - 1; i >= 0; --i)
        {
            if (niceName.charAt(i) == ".")
            {
                // Remove the ".html" part
                niceName = niceName.substring(0, i);
            }
            else if (niceName.charAt(i) == "\/")
            {
                // Remove the "Classes/" part
                niceName = niceName.substring(i + 1, niceName.length);
                break;
            }
        }
        
        var li = document.createElement("li");
        var div1 = document.createElement("div");
	var a = document.createElement("a");
        a.setAttribute("href", "Info/" + filePath);
        a.appendChild(document.createTextNode(niceName));
	div1.appendChild(a);
	    
	// Add another text field that will show the class'/struct's/enum's comment 
    	var div2 = document.createElement("div");
	div2.appendChild(document.createTextNode("BLAH"));
		
	li.appendChild(div1);
	li.appendChild(div2);

	var ul = document.getElementById("searchResultsList");
	ul.appendChild(li);
    }
    
    /* Return array of filenames to show for a search request. Lower indicies in the array will appear 
    higher up on the page */
    function getSearchResults(searchText)
    {
        var array = [];
        
        //TODO
        array.push("Classes/something1.html");
        array.push("Classes/building.html");
        array.push("Classes/infantry.html");
        
        return array;
    }
    
    
</script>
